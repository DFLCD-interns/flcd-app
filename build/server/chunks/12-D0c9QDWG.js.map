{"version":3,"file":"12-D0c9QDWG.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/dashboard/databases/users/_page.server.js","../../../.svelte-kit/adapter-node/nodes/12.js"],"sourcesContent":["import { l as deleteFromTableDB, r as getUsersListDB, u as updateTableDB } from \"../../../../../chunks/db.js\";\nimport { f as fail } from \"../../../../../chunks/index.js\";\nconst actions = {\n  deleteUser: async ({ request }) => {\n    const formData = await request.formData();\n    const id = formData.get(\"id\");\n    const fd = { id };\n    const form_data = new FormData();\n    for (let key in fd) {\n      form_data.append(key, fd[key]);\n    }\n    try {\n      await deleteFromTableDB(\"users\", form_data);\n    } catch (error) {\n      console.error(\"Error: \", error.message);\n      return fail(500, {\n        message: error.message\n      });\n    }\n  },\n  editUser: async ({ request }) => {\n    const formData = await request.formData();\n    const id = formData.get(\"id\");\n    const first_name = formData.get(\"first_name\");\n    const old_first_name = formData.get(\"old_first_name\");\n    const last_name = formData.get(\"last_name\");\n    const old_last_name = formData.get(\"old_last_name\");\n    const email = formData.get(\"email\");\n    const old_email = formData.get(\"old_email\");\n    const phone = formData.get(\"phone\");\n    const old_phone = formData.get(\"old_phone\");\n    const student_number = formData.get(\"student_number\");\n    const old_student_number = formData.get(\"old_student_number\");\n    const course = formData.get(\"course\");\n    const old_course = formData.get(\"old_course\");\n    const department = formData.get(\"department\");\n    const old_department = formData.get(\"old_department\");\n    const access_level = formData.get(\"access_level\");\n    const old_access_level = formData.get(\"old_access_level\");\n    if (first_name === old_first_name && last_name === old_last_name && email === old_email && phone === old_phone && student_number == old_student_number && course == old_course && department == old_department && access_level == old_access_level) {\n      return fail(500, {\n        message: \"No changes made.\"\n      });\n    }\n    let users = await getUsersListDB();\n    let userStudentNumbers = users.map((item) => item.student_number);\n    if (student_number !== old_student_number) {\n      if (userStudentNumbers.includes(student_number)) {\n        return fail(500, {\n          message: \"This student number already exists!\"\n        });\n      }\n    }\n    let userEmails = users.map((item) => item.email);\n    console.log(old_email);\n    if (email !== old_email) {\n      if (userEmails.includes(email)) {\n        return fail(500, {\n          message: \"This email already exists!\"\n        });\n      }\n    }\n    const id_fd = { id };\n    const id_data = new FormData();\n    for (let key in id_fd) {\n      id_data.append(key, id_fd[key]);\n    }\n    const fd = {\n      first_name,\n      last_name,\n      email,\n      phone,\n      student_number,\n      course,\n      department,\n      access_level\n    };\n    const form_data = new FormData();\n    for (let key in fd) {\n      form_data.append(key, fd[key]);\n    }\n    try {\n      await updateTableDB(\"users\", id_data, form_data);\n    } catch (error) {\n      console.error(\"Error: \", error.message);\n      return fail(500, {\n        message: error.message\n      });\n    }\n  }\n};\nexport {\n  actions\n};\n","import * as server from '../entries/pages/dashboard/databases/users/_page.server.js';\n\nexport const index = 12;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/dashboard/databases/users/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/dashboard/databases/users/+page.server.js\";\nexport const imports = [\"_app/immutable/nodes/12.BIP3qjP8.js\",\"_app/immutable/chunks/scheduler.DOp8wpeX.js\",\"_app/immutable/chunks/index.DWy7Bods.js\",\"_app/immutable/chunks/each.xxwK4Lbk.js\",\"_app/immutable/chunks/Button.BXa4MMB8.js\",\"_app/immutable/chunks/spread.CgU5AtxT.js\",\"_app/immutable/chunks/bundle-mjs.8vkCkPAV.js\",\"_app/immutable/chunks/GradientButton.DdhgmlZd.js\",\"_app/immutable/chunks/Label.CeVi60PH.js\",\"_app/immutable/chunks/Input.Co8tTmGU.js\",\"_app/immutable/chunks/Wrapper.Dkt-i6bG.js\",\"_app/immutable/chunks/MultiSelect.CdzMrb2V.js\",\"_app/immutable/chunks/Badge.DEbT3qjz.js\",\"_app/immutable/chunks/index.BQaFFxeS.js\",\"_app/immutable/chunks/Search.C7MWu5Gt.js\",\"_app/immutable/chunks/TrashBinOutline.B6LB4Ldt.js\",\"_app/immutable/chunks/Frame.CkqC4DDT.js\",\"_app/immutable/chunks/CloseOutline.vdu5KTRw.js\",\"_app/immutable/chunks/EditOutline.z7FUiLX2.js\",\"_app/immutable/chunks/FilterSolid.k7JC76lm.js\",\"_app/immutable/chunks/forms.BPktwcJ9.js\",\"_app/immutable/chunks/entry.CL2sXVfz.js\",\"_app/immutable/chunks/index.DELnobZO.js\",\"_app/immutable/chunks/Toaster.svelte_svelte_type_style_lang.naqoLmSw.js\"];\nexport const stylesheets = [\"_app/immutable/assets/Toaster.CLpmFrbv.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}